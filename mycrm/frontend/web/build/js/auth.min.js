!function(t,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):t.bootbox=o(t.jQuery)}(this,function t(o,e){"use strict";function a(t){var o=C[f.locale];return o?o[t]:C.en[t]}function n(t,e,a){t.stopPropagation(),t.preventDefault(),o.isFunction(a)&&!1===a.call(e,t)||e.modal("hide")}function r(t){var o,e=0;for(o in t)e++;return e}function l(t,e){var a=0;o.each(t,function(t,o){e(t,o,a++)})}function i(t){var e,a;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=o.extend({},f,t),t.buttons||(t.buttons={}),e=t.buttons,a=r(e),l(e,function(t,n,r){if(o.isFunction(n)&&(n=e[t]={callback:n}),"object"!==o.type(n))throw new Error("button with key "+t+" must be an object");n.label||(n.label=t),n.className||(n.className=a<=2&&r===a-1?"btn-primary":"btn-default")}),t}function c(t,o){var e=t.length,a={};if(e<1||e>2)throw new Error("Invalid argument length");return 2===e||"string"==typeof t[0]?(a[o[0]]=t[0],a[o[1]]=t[1]):a=t[0],a}function s(t,e,a){return o.extend(!0,{},t,c(e,a))}function u(t,o,e,a){return b(s({className:"bootbox-"+t,buttons:p.apply(null,o)},a,e),o)}function p(){for(var t={},o=0,e=arguments.length;o<e;o++){var n=arguments[o],r=n.toLowerCase(),l=n.toUpperCase();t[r]={label:a(l)}}return t}function b(t,o){var a={};return l(o,function(t,o){a[o]=!0}),l(t.buttons,function(t){if(a[t]===e)throw new Error("button key "+t+" is not allowed (options are "+o.join("\n")+")")}),t}var d={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var t;if(t=u("alert",["ok"],["message","callback"],arguments),t.callback&&!o.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return!o.isFunction(t.callback)||t.callback.call(this)},m.dialog(t)},m.confirm=function(){var t;if(t=u("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},!o.isFunction(t.callback))throw new Error("confirm requires a callback");return m.dialog(t)},m.prompt=function(){var t,a,n,r,i,c,u;if(r=o(d.form),a={className:"bootbox-prompt",buttons:p("cancel","confirm"),value:"",inputType:"text"},t=b(s(a,arguments,["title","callback"]),["cancel","confirm"]),c=t.show===e||t.show,t.message=r,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var e;switch(t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":e=i.val();break;case"checkbox":var a=i.find("input:checked");e=[],l(a,function(t,a){e.push(o(a).val())})}return t.callback.call(this,e)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!o.isFunction(t.callback))throw new Error("prompt requires a callback");if(!d.inputs[t.inputType])throw new Error("invalid prompt type");switch(i=o(d.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":i.val(t.value);break;case"select":var f={};if(u=t.inputOptions||[],!o.isArray(u))throw new Error("Please pass an array of input options");if(!u.length)throw new Error("prompt with select requires options");l(u,function(t,a){var n=i;if(a.value===e||a.text===e)throw new Error("given options in wrong format");a.group&&(f[a.group]||(f[a.group]=o("<optgroup/>").attr("label",a.group)),n=f[a.group]),n.append("<option value='"+a.value+"'>"+a.text+"</option>")}),l(f,function(t,o){i.append(o)}),i.val(t.value);break;case"checkbox":var C=o.isArray(t.value)?t.value:[t.value];if(u=t.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");i=o("<div/>"),l(u,function(e,a){var n=o(d.inputs[t.inputType]);n.find("input").attr("value",a.value),n.find("label").append(a.text),l(C,function(t,o){o===a.value&&n.find("input").prop("checked",!0)}),i.append(n)})}return t.placeholder&&i.attr("placeholder",t.placeholder),t.pattern&&i.attr("pattern",t.pattern),t.maxlength&&i.attr("maxlength",t.maxlength),r.append(i),r.on("submit",function(t){t.preventDefault(),t.stopPropagation(),n.find(".btn-primary").click()}),n=m.dialog(t),n.off("shown.bs.modal"),n.on("shown.bs.modal",function(){i.focus()}),!0===c&&n.modal("show"),n},m.dialog=function(t){t=i(t);var a=o(d.dialog),r=a.find(".modal-dialog"),c=a.find(".modal-body"),s=t.buttons,u="",p={onEscape:t.onEscape};if(o.fn.modal===e)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(l(s,function(t,o){u+="<button data-bb-handler='"+t+"' type='button' class='btn "+o.className+"'>"+o.label+"</button>",p[t]=o.callback}),c.find(".bootbox-body").html(t.message),!0===t.animate&&a.addClass("fade"),t.className&&a.addClass(t.className),"large"===t.size?r.addClass("modal-lg"):"small"===t.size&&r.addClass("modal-sm"),t.title&&c.before(d.header),t.closeButton){var b=o(d.closeButton);t.title?a.find(".modal-header").prepend(b):b.css("margin-top","-10px").prependTo(c)}return t.title&&a.find(".modal-title").html(t.title),u.length&&(c.after(d.footer),a.find(".modal-footer").html(u)),a.on("hidden.bs.modal",function(t){t.target===this&&a.remove()}),a.on("shown.bs.modal",function(){a.find(".btn-primary:first").focus()}),"static"!==t.backdrop&&a.on("click.dismiss.bs.modal",function(t){a.children(".modal-backdrop").length&&(t.currentTarget=a.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&a.trigger("escape.close.bb")}),a.on("escape.close.bb",function(t){p.onEscape&&n(t,a,p.onEscape)}),a.on("click",".modal-footer button",function(t){var e=o(this).data("bb-handler");n(t,a,p[e])}),a.on("click",".bootbox-close-button",function(t){n(t,a,p.onEscape)}),a.on("keyup",function(t){27===t.which&&a.trigger("escape.close.bb")}),o(t.container).append(a),a.modal({backdrop:!!t.backdrop&&"static",keyboard:!1,show:!1}),t.show&&a.modal("show"),a},m.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],o.extend(f,t)},m.hideAll=function(){return o(".bootbox").modal("hide"),m};var C={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.addLocale=function(t,e){return o.each(["OK","CANCEL","CONFIRM"],function(t,o){if(!e[o])throw new Error("Please supply a translation for '"+o+"'")}),C[t]={OK:e.OK,CANCEL:e.CANCEL,CONFIRM:e.CONFIRM},m},m.removeLocale=function(t){return delete C[t],m},m.setLocale=function(t){return m.setDefaults("locale",t)},m.init=function(e){return t(e||o)},m});
function validatePhone(e,n,t){var o="_csrf="+encodeURIComponent(t)+"&recaptcha="+encodeURIComponent(recaptcha)+"&login="+encodeURIComponent(e);sendRequest(o,"validate-phone",function(n){cur.forgotLogin=e,document.getElementById("phone-wrap").innerHTML="",document.getElementById("key-wrap").style.display="",document.getElementById("btn-restore").onclick=function(){cur.sendCode()}},function(e){showMessage(e.message)})}function validateKey(e,n,t){var o="_csrf="+encodeURIComponent(t)+"&key="+encodeURIComponent(n)+"&login="+encodeURIComponent(e);sendRequest(o,"validate-key",function(e){document.getElementById("key-wrap").style.display="none",document.getElementById("pass-wrap").style.display="",document.getElementById("btn-restore").onclick=function(){cur.newPassSend()}},function(e){showMessage(e.message)})}function sendRequest(e,n,t,o){var s=new XMLHttpRequest;s.open("POST",n,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4==this.readyState&&200==this.status?t(JSON.parse(this.responseText)):4==this.readyState&&400==this.status&&o(JSON.parse(this.responseText))},s.send(e)}function showMessage(e,n){bootbox.alert(e,n)}var cur={_csrf:!1,forgotLogin:!1,forgotHash:!1,forgotFormSend:function(){cur._csrf=document.getElementsByName("_csrf")[0].value,validatePhone(document.getElementById("restoreform-phone").value,document.getElementById("restoreform-recaptcha").value,cur._csrf)},sendCode:function(){var e=document.getElementById("restoreform-code").value;validateKey(cur.forgotLogin,e,cur._csrf)},newPassSend:function(){document.getElementById("restore-form");if(0==document.getElementById("pass-wrap").getElementsByClassName(".has-error").length){var e=document.getElementById("pass").value,n=document.getElementById("repass").value;sendRequest("_csrf="+encodeURIComponent(cur._csrf)+"&login="+encodeURIComponent(cur.forgotLogin)+"&password="+encodeURIComponent(e)+"&repassword="+encodeURIComponent(n),"reset-password",function(e){showMessage(e.message,function(){window.location.href="login"})},function(e){showMessage(e.message)})}}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb3Rib3guanMiLCJhdXRoLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJib290Ym94IiwialF1ZXJ5IiwidGhpcyIsImluaXQiLCIkIiwidW5kZWZpbmVkIiwiX3QiLCJrZXkiLCJsb2NhbGUiLCJsb2NhbGVzIiwiZGVmYXVsdHMiLCJlbiIsInByb2Nlc3NDYWxsYmFjayIsImUiLCJkaWFsb2ciLCJjYWxsYmFjayIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiaXNGdW5jdGlvbiIsImNhbGwiLCJtb2RhbCIsImdldEtleUxlbmd0aCIsIm9iaiIsImsiLCJ0IiwiZWFjaCIsImNvbGxlY3Rpb24iLCJpdGVyYXRvciIsImluZGV4IiwidmFsdWUiLCJzYW5pdGl6ZSIsIm9wdGlvbnMiLCJidXR0b25zIiwidG90YWwiLCJFcnJvciIsIm1lc3NhZ2UiLCJleHRlbmQiLCJidXR0b24iLCJ0eXBlIiwibGFiZWwiLCJjbGFzc05hbWUiLCJtYXBBcmd1bWVudHMiLCJhcmdzIiwicHJvcGVydGllcyIsImFyZ24iLCJsZW5ndGgiLCJtZXJnZUFyZ3VtZW50cyIsIm1lcmdlRGlhbG9nT3B0aW9ucyIsImxhYmVscyIsInZhbGlkYXRlQnV0dG9ucyIsImNyZWF0ZUxhYmVscyIsImFwcGx5IiwiaSIsImoiLCJhcmd1bWVudHMiLCJhcmd1bWVudCIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJhbGxvd2VkQnV0dG9ucyIsImpvaW4iLCJ0ZW1wbGF0ZXMiLCJoZWFkZXIiLCJmb290ZXIiLCJjbG9zZUJ1dHRvbiIsImZvcm0iLCJpbnB1dHMiLCJ0ZXh0IiwidGV4dGFyZWEiLCJlbWFpbCIsInNlbGVjdCIsImNoZWNrYm94IiwiZGF0ZSIsInRpbWUiLCJudW1iZXIiLCJwYXNzd29yZCIsImJhY2tkcm9wIiwiYW5pbWF0ZSIsInNob3ciLCJjb250YWluZXIiLCJhbGVydCIsIm9rIiwib25Fc2NhcGUiLCJjb25maXJtIiwiY2FuY2VsIiwicHJvbXB0IiwiaW5wdXQiLCJzaG91bGRTaG93IiwiaW5wdXRPcHRpb25zIiwiaW5wdXRUeXBlIiwidmFsIiwiY2hlY2tlZEl0ZW1zIiwiZmluZCIsIl8iLCJpdGVtIiwicHVzaCIsInRpdGxlIiwiZ3JvdXBzIiwiaXNBcnJheSIsIm9wdGlvbiIsImVsZW0iLCJncm91cCIsImF0dHIiLCJhcHBlbmQiLCJ2YWx1ZXMiLCJwcm9wIiwicGxhY2Vob2xkZXIiLCJwYXR0ZXJuIiwibWF4bGVuZ3RoIiwib24iLCJjbGljayIsIm9mZiIsImZvY3VzIiwiaW5uZXJEaWFsb2ciLCJib2R5IiwiYnV0dG9uU3RyIiwiY2FsbGJhY2tzIiwiZm4iLCJodG1sIiwiYWRkQ2xhc3MiLCJzaXplIiwiYmVmb3JlIiwicHJlcGVuZCIsImNzcyIsInByZXBlbmRUbyIsImFmdGVyIiwidGFyZ2V0IiwicmVtb3ZlIiwiY2hpbGRyZW4iLCJjdXJyZW50VGFyZ2V0IiwiZ2V0IiwidHJpZ2dlciIsImNhbGxiYWNrS2V5IiwiZGF0YSIsIndoaWNoIiwia2V5Ym9hcmQiLCJzZXREZWZhdWx0cyIsImhpZGVBbGwiLCJiZ19CRyIsIk9LIiwiQ0FOQ0VMIiwiQ09ORklSTSIsImJyIiwiY3MiLCJkYSIsImRlIiwiZWwiLCJlcyIsImV0IiwiZmEiLCJmaSIsImZyIiwiaGUiLCJodSIsImhyIiwiaWQiLCJpdCIsImphIiwibHQiLCJsdiIsIm5sIiwibm8iLCJwbCIsInB0IiwicnUiLCJzcSIsInN2IiwidGgiLCJ0ciIsInpoX0NOIiwiemhfVFciLCJhZGRMb2NhbGUiLCJuYW1lIiwidiIsInJlbW92ZUxvY2FsZSIsInNldExvY2FsZSIsIl8kIiwidmFsaWRhdGVQaG9uZSIsImxvZ2luIiwiY2FwdGNoYSIsIl9jc3JmIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVjYXB0Y2hhIiwic2VuZFJlcXVlc3QiLCJyZXNwb25zZVRleHQiLCJjdXIiLCJmb3Jnb3RMb2dpbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJzdHlsZSIsImRpc3BsYXkiLCJvbmNsaWNrIiwic2VuZENvZGUiLCJyZXNwb25zZSIsInNob3dNZXNzYWdlIiwidmFsaWRhdGVLZXkiLCJuZXdQYXNzU2VuZCIsInVybCIsInN1Y2Nlc3MiLCJlcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwic2VuZCIsImZvcmdvdEhhc2giLCJmb3Jnb3RGb3JtU2VuZCIsImdldEVsZW1lbnRzQnlOYW1lIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhc3MiLCJyZXBhc3MiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJDQVFDLFNBQVVBLEVBQU1DLEdBRWYsWUFDc0IsbUJBQVhDLFNBQXlCQSxPQUFPQyxJQUV6Q0QsUUFBUSxVQUFXRCxHQUNTLGdCQUFaRyxTQUloQkMsT0FBT0QsUUFBVUgsRUFBUUssUUFBUSxXQUdqQ04sRUFBS08sUUFBVU4sRUFBUUQsRUFBS1EsU0FHOUJDLEtBQU0sUUFBU0MsR0FBS0MsRUFBR0MsR0FFdkIsWUFtRUEsU0FBU0MsR0FBR0MsR0FDVixHQUFJQyxHQUFTQyxFQUFRQyxFQUFTRixPQUM5QixPQUFPQSxHQUFTQSxFQUFPRCxHQUFPRSxFQUFRRSxHQUFHSixHQUczQyxRQUFTSyxHQUFnQkMsRUFBR0MsRUFBUUMsR0FDbENGLEVBQUVHLGtCQUNGSCxFQUFFSSxpQkFPbUJiLEVBQUVjLFdBQVdILEtBQTBDLElBQTdCQSxFQUFTSSxLQUFLTCxFQUFRRCxJQUluRUMsRUFBT00sTUFBTSxRQUlqQixRQUFTQyxHQUFhQyxHQUVwQixHQUFJQyxHQUFHQyxFQUFJLENBQ1gsS0FBS0QsSUFBS0QsR0FDUkUsR0FFRixPQUFPQSxHQUdULFFBQVNDLEdBQUtDLEVBQVlDLEdBQ3hCLEdBQUlDLEdB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QUsyTSxZQUFrQyxLQUFmM00sS0FBSzRNLFFBQ3BDUCxFQUFNUSxLQUFLQyxNQUFNOU0sS0FBS3FMLGdCQUc5QmlCLEVBQUlTLEtBQUtoRyxHQUdiLFFBQVNpRixhQUFZL0osRUFBU3BCLEdBQzFCZixRQUFRK0UsTUFBTTVDLEVBQVNwQixHQWhHM0IsR0FBSXlLLE1BQ0FMLE9BQU8sRUFDUE0sYUFBYSxFQUNieUIsWUFBWSxFQUNaQyxlQUFnQixXQUNaM0IsSUFBSUwsTUFBUU8sU0FBUzBCLGtCQUFrQixTQUFTLEdBQUd2TCxNQUduRG1KLGNBRllVLFNBQVNDLGVBQWUscUJBQXFCOUosTUFDekM2SixTQUFTQyxlQUFlLHlCQUF5QjlKLE1BQ2pDMkosSUFBSUwsUUFFeENhLFNBQVUsV0FDTixHQUFJekwsR0FBTW1MLFNBQVNDLGVBQWUsb0JBQW9COUosS0FDdERzSyxhQUFZWCxJQUFJQyxZQUFhbEwsRUFBS2lMLElBQUlMLFFBRTFDaUIsWUFBYSxXQUNFVixTQUFTQyxlQUFlLGVBRW5DLElBQTRELEdBRDdDRCxTQUFTQyxlQUFlLGFBQzFCMEIsdUJBQXVCLGNBQWN4SyxPQUFhLENBQzNELEdBQUl5SyxHQUFPNUIsU0FBU0MsZUFBZSxRQUFROUosTUFDdkMwTCxFQUFTN0IsU0FBU0MsZUFBZSxVQUFVOUosS0FlL0N5SixhQWRXLFNBQVdGLG1CQUFtQkksSUFBSUwsT0FDdkMsVUFBWUMsbUJBQW1CSSxJQUFJQyxhQUNuQyxhQUFlTCxtQkFBbUJrQyxHQUNsQyxlQUFpQmxDLG1CQUFtQm1DLEdBQ2hDLGlCQUNJLFNBQVV0QixHQUNwQkMsWUFBWUQsRUFBUzlKLFFBQVMsV0FDMUJxTCxPQUFPQyxTQUFTQyxLQUFPLFdBR25CLFNBQVV6QixHQUVsQkMsWUFEbUJELEVBQVM5SiIsImZpbGUiOiJhdXRoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogYm9vdGJveC5qcyBbdjQuNC4wXVxuICpcbiAqIGh0dHA6Ly9ib290Ym94anMuY29tL2xpY2Vuc2UudHh0XG4gKi9cblxuLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWFrZXVzYWJyZXcvYm9vdGJveC9pc3N1ZXMvMTgwXG4vLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWtldXNhYnJldy9ib290Ym94L2lzc3Vlcy8xODZcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuXG4gIFwidXNlIHN0cmljdFwiO1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFtcImpxdWVyeVwiXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAvLyBsaWtlIE5vZGUuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIikpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgcm9vdC5ib290Ym94ID0gZmFjdG9yeShyb290LmpRdWVyeSk7XG4gIH1cblxufSh0aGlzLCBmdW5jdGlvbiBpbml0KCQsIHVuZGVmaW5lZCkge1xuXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIHRoZSBiYXNlIERPTSBzdHJ1Y3R1cmUgbmVlZGVkIHRvIGNyZWF0ZSBhIG1vZGFsXG4gIHZhciB0ZW1wbGF0ZXMgPSB7XG4gICAgZGlhbG9nOlxuICAgICAgXCI8ZGl2IGNsYXNzPSdib290Ym94IG1vZGFsJyB0YWJpbmRleD0nLTEnIHJvbGU9J2RpYWxvZyc+XCIgK1xuICAgICAgICBcIjxkaXYgY2xhc3M9J21vZGFsLWRpYWxvZyc+XCIgK1xuICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbW9kYWwtY29udGVudCc+XCIgK1xuICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtb2RhbC1ib2R5Jz48ZGl2IGNsYXNzPSdib290Ym94LWJvZHknPjwvZGl2PjwvZGl2PlwiICtcbiAgICAgICAgICBcIjwvZGl2PlwiICtcbiAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICBcIjwvZGl2PlwiLFxuICAgIGhlYWRlcjpcbiAgICAgIFwiPGRpdiBjbGFzcz0nbW9kYWwtaGVhZGVyJz5cIiArXG4gICAgICAgIFwiPGg0IGNsYXNzPSdtb2RhbC10aXRsZSc+PC9oND5cIiArXG4gICAgICBcIjwvZGl2PlwiLFxuICAgIGZvb3RlcjpcbiAgICAgIFwiPGRpdiBjbGFzcz0nbW9kYWwtZm9vdGVyJz48L2Rpdj5cIixcbiAgICBjbG9zZUJ1dHRvbjpcbiAgICAgIFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdib290Ym94LWNsb3NlLWJ1dHRvbiBjbG9zZScgZGF0YS1kaXNtaXNzPSdtb2RhbCcgYXJpYS1oaWRkZW49J3RydWUnPiZ0aW1lczs8L2J1dHRvbj5cIixcbiAgICBmb3JtOlxuICAgICAgXCI8Zm9ybSBjbGFzcz0nYm9vdGJveC1mb3JtJz48L2Zvcm0+XCIsXG4gICAgaW5wdXRzOiB7XG4gICAgICB0ZXh0OlxuICAgICAgICBcIjxpbnB1dCBjbGFzcz0nYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LXRleHQgZm9ybS1jb250cm9sJyBhdXRvY29tcGxldGU9b2ZmIHR5cGU9dGV4dCAvPlwiLFxuICAgICAgdGV4dGFyZWE6XG4gICAgICAgIFwiPHRleHRhcmVhIGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtdGV4dGFyZWEgZm9ybS1jb250cm9sJz48L3RleHRhcmVhPlwiLFxuICAgICAgZW1haWw6XG4gICAgICAgIFwiPGlucHV0IGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtZW1haWwgZm9ybS1jb250cm9sJyBhdXRvY29tcGxldGU9J29mZicgdHlwZT0nZW1haWwnIC8+XCIsXG4gICAgICBzZWxlY3Q6XG4gICAgICAgIFwiPHNlbGVjdCBjbGFzcz0nYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LXNlbGVjdCBmb3JtLWNvbnRyb2wnPjwvc2VsZWN0PlwiLFxuICAgICAgY2hlY2tib3g6XG4gICAgICAgIFwiPGRpdiBjbGFzcz0nY2hlY2tib3gnPjxsYWJlbD48aW5wdXQgY2xhc3M9J2Jvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1jaGVja2JveCcgdHlwZT0nY2hlY2tib3gnIC8+PC9sYWJlbD48L2Rpdj5cIixcbiAgICAgIGRhdGU6XG4gICAgICAgIFwiPGlucHV0IGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtZGF0ZSBmb3JtLWNvbnRyb2wnIGF1dG9jb21wbGV0ZT1vZmYgdHlwZT0nZGF0ZScgLz5cIixcbiAgICAgIHRpbWU6XG4gICAgICAgIFwiPGlucHV0IGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtdGltZSBmb3JtLWNvbnRyb2wnIGF1dG9jb21wbGV0ZT1vZmYgdHlwZT0ndGltZScgLz5cIixcbiAgICAgIG51bWJlcjpcbiAgICAgICAgXCI8aW5wdXQgY2xhc3M9J2Jvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1udW1iZXIgZm9ybS1jb250cm9sJyBhdXRvY29tcGxldGU9b2ZmIHR5cGU9J251bWJlcicgLz5cIixcbiAgICAgIHBhc3N3b3JkOlxuICAgICAgICBcIjxpbnB1dCBjbGFzcz0nYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LXBhc3N3b3JkIGZvcm0tY29udHJvbCcgYXV0b2NvbXBsZXRlPSdvZmYnIHR5cGU9J3Bhc3N3b3JkJyAvPlwiXG4gICAgfVxuICB9O1xuXG4gIHZhciBkZWZhdWx0cyA9IHtcbiAgICAvLyBkZWZhdWx0IGxhbmd1YWdlXG4gICAgbG9jYWxlOiBcImVuXCIsXG4gICAgLy8gc2hvdyBiYWNrZHJvcCBvciBub3QuIERlZmF1bHQgdG8gc3RhdGljIHNvIHVzZXIgaGFzIHRvIGludGVyYWN0IHdpdGggZGlhbG9nXG4gICAgYmFja2Ryb3A6IFwic3RhdGljXCIsXG4gICAgLy8gYW5pbWF0ZSB0aGUgbW9kYWwgaW4vb3V0XG4gICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAvLyBhZGRpdGlvbmFsIGNsYXNzIHN0cmluZyBhcHBsaWVkIHRvIHRoZSB0b3AgbGV2ZWwgZGlhbG9nXG4gICAgY2xhc3NOYW1lOiBudWxsLFxuICAgIC8vIHdoZXRoZXIgb3Igbm90IHRvIGluY2x1ZGUgYSBjbG9zZSBidXR0b25cbiAgICBjbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAvLyBzaG93IHRoZSBkaWFsb2cgaW1tZWRpYXRlbHkgYnkgZGVmYXVsdFxuICAgIHNob3c6IHRydWUsXG4gICAgLy8gZGlhbG9nIGNvbnRhaW5lclxuICAgIGNvbnRhaW5lcjogXCJib2R5XCJcbiAgfTtcblxuICAvLyBvdXIgcHVibGljIG9iamVjdDsgYXVnbWVudGVkIGFmdGVyIG91ciBwcml2YXRlIEFQSVxuICB2YXIgZXhwb3J0cyA9IHt9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gX3Qoa2V5KSB7XG4gICAgdmFyIGxvY2FsZSA9IGxvY2FsZXNbZGVmYXVsdHMubG9jYWxlXTtcbiAgICByZXR1cm4gbG9jYWxlID8gbG9jYWxlW2tleV0gOiBsb2NhbGVzLmVuW2tleV07XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzQ2FsbGJhY2soZSwgZGlhbG9nLCBjYWxsYmFjaykge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gYnkgZGVmYXVsdCB3ZSBhc3N1bWUgYSBjYWxsYmFjayB3aWxsIGdldCByaWQgb2YgdGhlIGRpYWxvZyxcbiAgICAvLyBhbHRob3VnaCBpdCBpcyBnaXZlbiB0aGUgb3Bwb3J0dW5pdHkgdG8gb3ZlcnJpZGUgdGhpc1xuXG4gICAgLy8gc28sIGlmIHRoZSBjYWxsYmFjayBjYW4gYmUgaW52b2tlZCBhbmQgaXQgKmV4cGxpY2l0bHkgcmV0dXJucyBmYWxzZSpcbiAgICAvLyB0aGVuIHdlJ2xsIHNldCBhIGZsYWcgdG8ga2VlcCB0aGUgZGlhbG9nIGFjdGl2ZS4uLlxuICAgIHZhciBwcmVzZXJ2ZURpYWxvZyA9ICQuaXNGdW5jdGlvbihjYWxsYmFjaykgJiYgY2FsbGJhY2suY2FsbChkaWFsb2csIGUpID09PSBmYWxzZTtcblxuICAgIC8vIC4uLiBvdGhlcndpc2Ugd2UnbGwgYmluIGl0XG4gICAgaWYgKCFwcmVzZXJ2ZURpYWxvZykge1xuICAgICAgZGlhbG9nLm1vZGFsKFwiaGlkZVwiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRLZXlMZW5ndGgob2JqKSB7XG4gICAgLy8gQFRPRE8gZGVmZXIgdG8gT2JqZWN0LmtleXMoeCkubGVuZ3RoIGlmIGF2YWlsYWJsZT9cbiAgICB2YXIgaywgdCA9IDA7XG4gICAgZm9yIChrIGluIG9iaikge1xuICAgICAgdCArKztcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH1cblxuICBmdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICAkLmVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgaXRlcmF0b3Ioa2V5LCB2YWx1ZSwgaW5kZXgrKyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzYW5pdGl6ZShvcHRpb25zKSB7XG4gICAgdmFyIGJ1dHRvbnM7XG4gICAgdmFyIHRvdGFsO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugc3VwcGx5IGFuIG9iamVjdCBvZiBvcHRpb25zXCIpO1xuICAgIH1cblxuICAgIGlmICghb3B0aW9ucy5tZXNzYWdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugc3BlY2lmeSBhIG1lc3NhZ2VcIik7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIGFueSBzdXBwbGllZCBvcHRpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIGRlZmF1bHRzXG4gICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICBpZiAoIW9wdGlvbnMuYnV0dG9ucykge1xuICAgICAgb3B0aW9ucy5idXR0b25zID0ge307XG4gICAgfVxuXG4gICAgYnV0dG9ucyA9IG9wdGlvbnMuYnV0dG9ucztcblxuICAgIHRvdGFsID0gZ2V0S2V5TGVuZ3RoKGJ1dHRvbnMpO1xuXG4gICAgZWFjaChidXR0b25zLCBmdW5jdGlvbihrZXksIGJ1dHRvbiwgaW5kZXgpIHtcblxuICAgICAgaWYgKCQuaXNGdW5jdGlvbihidXR0b24pKSB7XG4gICAgICAgIC8vIHNob3J0IGZvcm0sIGFzc3VtZSB2YWx1ZSBpcyBvdXIgY2FsbGJhY2suIFNpbmNlIGJ1dHRvblxuICAgICAgICAvLyBpc24ndCBhbiBvYmplY3QgaXQgaXNuJ3QgYSByZWZlcmVuY2UgZWl0aGVyIHNvIHJlLWFzc2lnbiBpdFxuICAgICAgICBidXR0b24gPSBidXR0b25zW2tleV0gPSB7XG4gICAgICAgICAgY2FsbGJhY2s6IGJ1dHRvblxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBiZWZvcmUgYW55IGZ1cnRoZXIgY2hlY2tzIG1ha2Ugc3VyZSBieSBub3cgYnV0dG9uIGlzIHRoZSBjb3JyZWN0IHR5cGVcbiAgICAgIGlmICgkLnR5cGUoYnV0dG9uKSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJidXR0b24gd2l0aCBrZXkgXCIgKyBrZXkgKyBcIiBtdXN0IGJlIGFuIG9iamVjdFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFidXR0b24ubGFiZWwpIHtcbiAgICAgICAgLy8gdGhlIGxhY2sgb2YgYW4gZXhwbGljaXQgbGFiZWwgbWVhbnMgd2UnbGwgYXNzdW1lIHRoZSBrZXkgaXMgZ29vZCBlbm91Z2hcbiAgICAgICAgYnV0dG9uLmxhYmVsID0ga2V5O1xuICAgICAgfVxuXG4gICAgICBpZiAoIWJ1dHRvbi5jbGFzc05hbWUpIHtcbiAgICAgICAgaWYgKHRvdGFsIDw9IDIgJiYgaW5kZXggPT09IHRvdGFsLTEpIHtcbiAgICAgICAgICAvLyBhbHdheXMgYWRkIGEgcHJpbWFyeSB0byB0aGUgbWFpbiBvcHRpb24gaW4gYSB0d28tYnV0dG9uIGRpYWxvZ1xuICAgICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBcImJ0bi1wcmltYXJ5XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IFwiYnRuLWRlZmF1bHRcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogbWFwIGEgZmxleGlibGUgc2V0IG9mIGFyZ3VtZW50cyBpbnRvIGEgc2luZ2xlIHJldHVybmVkIG9iamVjdFxuICAgKiBpZiBhcmdzLmxlbmd0aCBpcyBhbHJlYWR5IG9uZSBqdXN0IHJldHVybiBpdCwgb3RoZXJ3aXNlXG4gICAqIHVzZSB0aGUgcHJvcGVydGllcyBhcmd1bWVudCB0byBtYXAgdGhlIHVubmFtZWQgYXJncyB0b1xuICAgKiBvYmplY3QgcHJvcGVydGllc1xuICAgKiBzbyBpbiB0aGUgbGF0dGVyIGNhc2U6XG4gICAqIG1hcEFyZ3VtZW50cyhbXCJmb29cIiwgJC5ub29wXSwgW1wibWVzc2FnZVwiLCBcImNhbGxiYWNrXCJdKVxuICAgKiAtPiB7IG1lc3NhZ2U6IFwiZm9vXCIsIGNhbGxiYWNrOiAkLm5vb3AgfVxuICAgKi9cbiAgZnVuY3Rpb24gbWFwQXJndW1lbnRzKGFyZ3MsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgYXJnbiA9IGFyZ3MubGVuZ3RoO1xuICAgIHZhciBvcHRpb25zID0ge307XG5cbiAgICBpZiAoYXJnbiA8IDEgfHwgYXJnbiA+IDIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgbGVuZ3RoXCIpO1xuICAgIH1cblxuICAgIGlmIChhcmduID09PSAyIHx8IHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvcHRpb25zW3Byb3BlcnRpZXNbMF1dID0gYXJnc1swXTtcbiAgICAgIG9wdGlvbnNbcHJvcGVydGllc1sxXV0gPSBhcmdzWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zID0gYXJnc1swXTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBtZXJnZSBhIHNldCBvZiBkZWZhdWx0IGRpYWxvZyBvcHRpb25zIHdpdGggdXNlciBzdXBwbGllZCBhcmd1bWVudHNcbiAgICovXG4gIGZ1bmN0aW9uIG1lcmdlQXJndW1lbnRzKGRlZmF1bHRzLCBhcmdzLCBwcm9wZXJ0aWVzKSB7XG4gICAgcmV0dXJuICQuZXh0ZW5kKFxuICAgICAgLy8gZGVlcCBtZXJnZVxuICAgICAgdHJ1ZSxcbiAgICAgIC8vIGVuc3VyZSB0aGUgdGFyZ2V0IGlzIGFuIGVtcHR5LCB1bnJlZmVyZW5jZWQgb2JqZWN0XG4gICAgICB7fSxcbiAgICAgIC8vIHRoZSBiYXNlIG9wdGlvbnMgb2JqZWN0IGZvciB0aGlzIHR5cGUgb2YgZGlhbG9nIChvZnRlbiBqdXN0IGJ1dHRvbnMpXG4gICAgICBkZWZhdWx0cyxcbiAgICAgIC8vIGFyZ3MgY291bGQgYmUgYW4gb2JqZWN0IG9yIGFycmF5OyBpZiBpdCdzIGFuIGFycmF5IHByb3BlcnRpZXMgd2lsbFxuICAgICAgLy8gbWFwIGl0IHRvIGEgcHJvcGVyIG9wdGlvbnMgb2JqZWN0XG4gICAgICBtYXBBcmd1bWVudHMoXG4gICAgICAgIGFyZ3MsXG4gICAgICAgIHByb3BlcnRpZXNcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIHRoaXMgZW50cnktbGV2ZWwgbWV0aG9kIG1ha2VzIGhlYXZ5IHVzZSBvZiBjb21wb3NpdGlvbiB0byB0YWtlIGEgc2ltcGxlXG4gICAqIHJhbmdlIG9mIGlucHV0cyBhbmQgcmV0dXJuIHZhbGlkIG9wdGlvbnMgc3VpdGFibGUgZm9yIHBhc3NpbmcgdG8gYm9vdGJveC5kaWFsb2dcbiAgICovXG4gIGZ1bmN0aW9uIG1lcmdlRGlhbG9nT3B0aW9ucyhjbGFzc05hbWUsIGxhYmVscywgcHJvcGVydGllcywgYXJncykge1xuICAgIC8vICBidWlsZCB1cCBhIGJhc2Ugc2V0IG9mIGRpYWxvZyBwcm9wZXJ0aWVzXG4gICAgdmFyIGJhc2VPcHRpb25zID0ge1xuICAgICAgY2xhc3NOYW1lOiBcImJvb3Rib3gtXCIgKyBjbGFzc05hbWUsXG4gICAgICBidXR0b25zOiBjcmVhdGVMYWJlbHMuYXBwbHkobnVsbCwgbGFiZWxzKVxuICAgIH07XG5cbiAgICAvLyBlbnN1cmUgdGhlIGJ1dHRvbnMgcHJvcGVydGllcyBnZW5lcmF0ZWQsICphZnRlciogbWVyZ2luZ1xuICAgIC8vIHdpdGggdXNlciBhcmdzIGFyZSBzdGlsbCB2YWxpZCBhZ2FpbnN0IHRoZSBzdXBwbGllZCBsYWJlbHNcbiAgICByZXR1cm4gdmFsaWRhdGVCdXR0b25zKFxuICAgICAgLy8gbWVyZ2UgdGhlIGdlbmVyYXRlZCBiYXNlIHByb3BlcnRpZXMgd2l0aCB1c2VyIHN1cHBsaWVkIGFyZ3VtZW50c1xuICAgICAgbWVyZ2VBcmd1bWVudHMoXG4gICAgICAgIGJhc2VPcHRpb25zLFxuICAgICAgICBhcmdzLFxuICAgICAgICAvLyBpZiBhcmdzLmxlbmd0aCA+IDEsIHByb3BlcnRpZXMgc3BlY2lmeSBob3cgZWFjaCBhcmcgbWFwcyB0byBhbiBvYmplY3Qga2V5XG4gICAgICAgIHByb3BlcnRpZXNcbiAgICAgICksXG4gICAgICBsYWJlbHNcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIGZyb20gYSBnaXZlbiBsaXN0IG9mIGFyZ3VtZW50cyByZXR1cm4gYSBzdWl0YWJsZSBvYmplY3Qgb2YgYnV0dG9uIGxhYmVsc1xuICAgKiBhbGwgdGhpcyBkb2VzIGlzIG5vcm1hbGlzZSB0aGUgZ2l2ZW4gbGFiZWxzIGFuZCB0cmFuc2xhdGUgdGhlbSB3aGVyZSBwb3NzaWJsZVxuICAgKiBlLmcuIFwib2tcIiwgXCJjb25maXJtXCIgLT4geyBvazogXCJPSywgY2FuY2VsOiBcIkFubnVsZXJlblwiIH1cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUxhYmVscygpIHtcbiAgICB2YXIgYnV0dG9ucyA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICB2YXIgYXJndW1lbnQgPSBhcmd1bWVudHNbaV07XG4gICAgICB2YXIga2V5ID0gYXJndW1lbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50LnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgIGJ1dHRvbnNba2V5XSA9IHtcbiAgICAgICAgbGFiZWw6IF90KHZhbHVlKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnV0dG9ucztcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlQnV0dG9ucyhvcHRpb25zLCBidXR0b25zKSB7XG4gICAgdmFyIGFsbG93ZWRCdXR0b25zID0ge307XG4gICAgZWFjaChidXR0b25zLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICBhbGxvd2VkQnV0dG9uc1t2YWx1ZV0gPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgZWFjaChvcHRpb25zLmJ1dHRvbnMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgaWYgKGFsbG93ZWRCdXR0b25zW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJidXR0b24ga2V5IFwiICsga2V5ICsgXCIgaXMgbm90IGFsbG93ZWQgKG9wdGlvbnMgYXJlIFwiICsgYnV0dG9ucy5qb2luKFwiXFxuXCIpICsgXCIpXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICBleHBvcnRzLmFsZXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9wdGlvbnM7XG5cbiAgICBvcHRpb25zID0gbWVyZ2VEaWFsb2dPcHRpb25zKFwiYWxlcnRcIiwgW1wib2tcIl0sIFtcIm1lc3NhZ2VcIiwgXCJjYWxsYmFja1wiXSwgYXJndW1lbnRzKTtcblxuICAgIGlmIChvcHRpb25zLmNhbGxiYWNrICYmICEkLmlzRnVuY3Rpb24ob3B0aW9ucy5jYWxsYmFjaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImFsZXJ0IHJlcXVpcmVzIGNhbGxiYWNrIHByb3BlcnR5IHRvIGJlIGEgZnVuY3Rpb24gd2hlbiBwcm92aWRlZFwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBvdmVycmlkZXNcbiAgICAgKi9cbiAgICBvcHRpb25zLmJ1dHRvbnMub2suY2FsbGJhY2sgPSBvcHRpb25zLm9uRXNjYXBlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJC5pc0Z1bmN0aW9uKG9wdGlvbnMuY2FsbGJhY2spKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmNhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuZGlhbG9nKG9wdGlvbnMpO1xuICB9O1xuXG4gIGV4cG9ydHMuY29uZmlybSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvcHRpb25zO1xuXG4gICAgb3B0aW9ucyA9IG1lcmdlRGlhbG9nT3B0aW9ucyhcImNvbmZpcm1cIiwgW1wiY2FuY2VsXCIsIFwiY29uZmlybVwiXSwgW1wibWVzc2FnZVwiLCBcImNhbGxiYWNrXCJdLCBhcmd1bWVudHMpO1xuXG4gICAgLyoqXG4gICAgICogb3ZlcnJpZGVzOyB1bmRvIGFueXRoaW5nIHRoZSB1c2VyIHRyaWVkIHRvIHNldCB0aGV5IHNob3VsZG4ndCBoYXZlXG4gICAgICovXG4gICAgb3B0aW9ucy5idXR0b25zLmNhbmNlbC5jYWxsYmFjayA9IG9wdGlvbnMub25Fc2NhcGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmNhbGxiYWNrLmNhbGwodGhpcywgZmFsc2UpO1xuICAgIH07XG5cbiAgICBvcHRpb25zLmJ1dHRvbnMuY29uZmlybS5jYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuY2FsbGJhY2suY2FsbCh0aGlzLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgLy8gY29uZmlybSBzcGVjaWZpYyB2YWxpZGF0aW9uXG4gICAgaWYgKCEkLmlzRnVuY3Rpb24ob3B0aW9ucy5jYWxsYmFjaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNvbmZpcm0gcmVxdWlyZXMgYSBjYWxsYmFja1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXhwb3J0cy5kaWFsb2cob3B0aW9ucyk7XG4gIH07XG5cbiAgZXhwb3J0cy5wcm9tcHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3B0aW9ucztcbiAgICB2YXIgZGVmYXVsdHM7XG4gICAgdmFyIGRpYWxvZztcbiAgICB2YXIgZm9ybTtcbiAgICB2YXIgaW5wdXQ7XG4gICAgdmFyIHNob3VsZFNob3c7XG4gICAgdmFyIGlucHV0T3B0aW9ucztcblxuICAgIC8vIHdlIGhhdmUgdG8gY3JlYXRlIG91ciBmb3JtIGZpcnN0IG90aGVyd2lzZVxuICAgIC8vIGl0cyB2YWx1ZSBpcyB1bmRlZmluZWQgd2hlbiBnZWFyaW5nIHVwIG91ciBvcHRpb25zXG4gICAgLy8gQFRPRE8gdGhpcyBjb3VsZCBiZSBzb2x2ZWQgYnkgYWxsb3dpbmcgbWVzc2FnZSB0b1xuICAgIC8vIGJlIGEgZnVuY3Rpb24gaW5zdGVhZC4uLlxuICAgIGZvcm0gPSAkKHRlbXBsYXRlcy5mb3JtKTtcblxuICAgIC8vIHByb21wdCBkZWZhdWx0cyBhcmUgbW9yZSBjb21wbGV4IHRoYW4gb3RoZXJzIGluIHRoYXRcbiAgICAvLyB1c2VycyBjYW4gb3ZlcnJpZGUgbW9yZSBkZWZhdWx0c1xuICAgIC8vIEBUT0RPIEkgZG9uJ3QgbGlrZSB0aGF0IHByb21wdCBoYXMgdG8gZG8gYSBsb3Qgb2YgaGVhdnlcbiAgICAvLyBsaWZ0aW5nIHdoaWNoIG1lcmdlRGlhbG9nT3B0aW9ucyBjYW4gKmFsbW9zdCogc3VwcG9ydCBhbHJlYWR5XG4gICAgLy8ganVzdCBiZWNhdXNlIG9mICd2YWx1ZScgYW5kICdpbnB1dFR5cGUnIC0gY2FuIHdlIHJlZmFjdG9yP1xuICAgIGRlZmF1bHRzID0ge1xuICAgICAgY2xhc3NOYW1lOiBcImJvb3Rib3gtcHJvbXB0XCIsXG4gICAgICBidXR0b25zOiBjcmVhdGVMYWJlbHMoXCJjYW5jZWxcIiwgXCJjb25maXJtXCIpLFxuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICBpbnB1dFR5cGU6IFwidGV4dFwiXG4gICAgfTtcblxuICAgIG9wdGlvbnMgPSB2YWxpZGF0ZUJ1dHRvbnMoXG4gICAgICBtZXJnZUFyZ3VtZW50cyhkZWZhdWx0cywgYXJndW1lbnRzLCBbXCJ0aXRsZVwiLCBcImNhbGxiYWNrXCJdKSxcbiAgICAgIFtcImNhbmNlbFwiLCBcImNvbmZpcm1cIl1cbiAgICApO1xuXG4gICAgLy8gY2FwdHVyZSB0aGUgdXNlcidzIHNob3cgdmFsdWU7IHdlIGFsd2F5cyBzZXQgdGhpcyB0byBmYWxzZSBiZWZvcmVcbiAgICAvLyBzcGF3bmluZyB0aGUgZGlhbG9nIHRvIGdpdmUgdXMgYSBjaGFuY2UgdG8gYXR0YWNoIHNvbWUgaGFuZGxlcnMgdG9cbiAgICAvLyBpdCwgYnV0IHdlIG5lZWQgdG8gbWFrZSBzdXJlIHdlIHJlc3BlY3QgYSBwcmVmZXJlbmNlIG5vdCB0byBzaG93IGl0XG4gICAgc2hvdWxkU2hvdyA9IChvcHRpb25zLnNob3cgPT09IHVuZGVmaW5lZCkgPyB0cnVlIDogb3B0aW9ucy5zaG93O1xuXG4gICAgLyoqXG4gICAgICogb3ZlcnJpZGVzOyB1bmRvIGFueXRoaW5nIHRoZSB1c2VyIHRyaWVkIHRvIHNldCB0aGV5IHNob3VsZG4ndCBoYXZlXG4gICAgICovXG4gICAgb3B0aW9ucy5tZXNzYWdlID0gZm9ybTtcblxuICAgIG9wdGlvbnMuYnV0dG9ucy5jYW5jZWwuY2FsbGJhY2sgPSBvcHRpb25zLm9uRXNjYXBlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5jYWxsYmFjay5jYWxsKHRoaXMsIG51bGwpO1xuICAgIH07XG5cbiAgICBvcHRpb25zLmJ1dHRvbnMuY29uZmlybS5jYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICBzd2l0Y2ggKG9wdGlvbnMuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgIGNhc2UgXCJ0ZXh0YXJlYVwiOlxuICAgICAgICBjYXNlIFwiZW1haWxcIjpcbiAgICAgICAgY2FzZSBcInNlbGVjdFwiOlxuICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICBjYXNlIFwidGltZVwiOlxuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgIGNhc2UgXCJwYXNzd29yZFwiOlxuICAgICAgICAgIHZhbHVlID0gaW5wdXQudmFsKCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgdmFyIGNoZWNrZWRJdGVtcyA9IGlucHV0LmZpbmQoXCJpbnB1dDpjaGVja2VkXCIpO1xuXG4gICAgICAgICAgLy8gd2UgYXNzdW1lIHRoYXQgY2hlY2tib3hlcyBhcmUgYWx3YXlzIG11bHRpcGxlLFxuICAgICAgICAgIC8vIGhlbmNlIHdlIGRlZmF1bHQgdG8gYW4gZW1wdHkgYXJyYXlcbiAgICAgICAgICB2YWx1ZSA9IFtdO1xuXG4gICAgICAgICAgZWFjaChjaGVja2VkSXRlbXMsIGZ1bmN0aW9uKF8sIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhbHVlLnB1c2goJChpdGVtKS52YWwoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvcHRpb25zLmNhbGxiYWNrLmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH07XG5cbiAgICBvcHRpb25zLnNob3cgPSBmYWxzZTtcblxuICAgIC8vIHByb21wdCBzcGVjaWZpYyB2YWxpZGF0aW9uXG4gICAgaWYgKCFvcHRpb25zLnRpdGxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwcm9tcHQgcmVxdWlyZXMgYSB0aXRsZVwiKTtcbiAgICB9XG5cbiAgICBpZiAoISQuaXNGdW5jdGlvbihvcHRpb25zLmNhbGxiYWNrKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicHJvbXB0IHJlcXVpcmVzIGEgY2FsbGJhY2tcIik7XG4gICAgfVxuXG4gICAgaWYgKCF0ZW1wbGF0ZXMuaW5wdXRzW29wdGlvbnMuaW5wdXRUeXBlXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwcm9tcHQgdHlwZVwiKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgdGhlIGlucHV0IGJhc2VkIG9uIHRoZSBzdXBwbGllZCB0eXBlXG4gICAgaW5wdXQgPSAkKHRlbXBsYXRlcy5pbnB1dHNbb3B0aW9ucy5pbnB1dFR5cGVdKTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy5pbnB1dFR5cGUpIHtcbiAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICBjYXNlIFwidGV4dGFyZWFcIjpcbiAgICAgIGNhc2UgXCJlbWFpbFwiOlxuICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgIGNhc2UgXCJ0aW1lXCI6XG4gICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICBjYXNlIFwicGFzc3dvcmRcIjpcbiAgICAgICAgaW5wdXQudmFsKG9wdGlvbnMudmFsdWUpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcInNlbGVjdFwiOlxuICAgICAgICB2YXIgZ3JvdXBzID0ge307XG4gICAgICAgIGlucHV0T3B0aW9ucyA9IG9wdGlvbnMuaW5wdXRPcHRpb25zIHx8IFtdO1xuXG4gICAgICAgIGlmICghJC5pc0FycmF5KGlucHV0T3B0aW9ucykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcGFzcyBhbiBhcnJheSBvZiBpbnB1dCBvcHRpb25zXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpbnB1dE9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicHJvbXB0IHdpdGggc2VsZWN0IHJlcXVpcmVzIG9wdGlvbnNcIik7XG4gICAgICAgIH1cblxuICAgICAgICBlYWNoKGlucHV0T3B0aW9ucywgZnVuY3Rpb24oXywgb3B0aW9uKSB7XG5cbiAgICAgICAgICAvLyBhc3N1bWUgdGhlIGVsZW1lbnQgdG8gYXR0YWNoIHRvIGlzIHRoZSBpbnB1dC4uLlxuICAgICAgICAgIHZhciBlbGVtID0gaW5wdXQ7XG5cbiAgICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSB1bmRlZmluZWQgfHwgb3B0aW9uLnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZ2l2ZW4gb3B0aW9ucyBpbiB3cm9uZyBmb3JtYXRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gLi4uIGJ1dCBvdmVycmlkZSB0aGF0IGVsZW1lbnQgaWYgdGhpcyBvcHRpb24gc2l0cyBpbiBhIGdyb3VwXG5cbiAgICAgICAgICBpZiAob3B0aW9uLmdyb3VwKSB7XG4gICAgICAgICAgICAvLyBpbml0aWFsaXNlIGdyb3VwIGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgaWYgKCFncm91cHNbb3B0aW9uLmdyb3VwXSkge1xuICAgICAgICAgICAgICBncm91cHNbb3B0aW9uLmdyb3VwXSA9ICQoXCI8b3B0Z3JvdXAvPlwiKS5hdHRyKFwibGFiZWxcIiwgb3B0aW9uLmdyb3VwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbSA9IGdyb3Vwc1tvcHRpb24uZ3JvdXBdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW0uYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBvcHRpb24udmFsdWUgKyBcIic+XCIgKyBvcHRpb24udGV4dCArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBlYWNoKGdyb3VwcywgZnVuY3Rpb24oXywgZ3JvdXApIHtcbiAgICAgICAgICBpbnB1dC5hcHBlbmQoZ3JvdXApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBzYWZlIHRvIHNldCBhIHNlbGVjdCdzIHZhbHVlIGFzIHBlciBhIG5vcm1hbCBpbnB1dFxuICAgICAgICBpbnB1dC52YWwob3B0aW9ucy52YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgdmFyIHZhbHVlcyAgID0gJC5pc0FycmF5KG9wdGlvbnMudmFsdWUpID8gb3B0aW9ucy52YWx1ZSA6IFtvcHRpb25zLnZhbHVlXTtcbiAgICAgICAgaW5wdXRPcHRpb25zID0gb3B0aW9ucy5pbnB1dE9wdGlvbnMgfHwgW107XG5cbiAgICAgICAgaWYgKCFpbnB1dE9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicHJvbXB0IHdpdGggY2hlY2tib3ggcmVxdWlyZXMgb3B0aW9uc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaW5wdXRPcHRpb25zWzBdLnZhbHVlIHx8ICFpbnB1dE9wdGlvbnNbMF0udGV4dCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImdpdmVuIG9wdGlvbnMgaW4gd3JvbmcgZm9ybWF0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2tib3hlcyBoYXZlIHRvIG5lc3Qgd2l0aGluIGEgY29udGFpbmluZyBlbGVtZW50LCBzb1xuICAgICAgICAvLyB0aGV5IGJyZWFrIHRoZSBydWxlcyBhIGJpdCBhbmQgd2UgZW5kIHVwIHJlLWFzc2lnbmluZ1xuICAgICAgICAvLyBvdXIgJ2lucHV0JyBlbGVtZW50IHRvIHRoaXMgY29udGFpbmVyIGluc3RlYWRcbiAgICAgICAgaW5wdXQgPSAkKFwiPGRpdi8+XCIpO1xuXG4gICAgICAgIGVhY2goaW5wdXRPcHRpb25zLCBmdW5jdGlvbihfLCBvcHRpb24pIHtcbiAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkKHRlbXBsYXRlcy5pbnB1dHNbb3B0aW9ucy5pbnB1dFR5cGVdKTtcblxuICAgICAgICAgIGNoZWNrYm94LmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwidmFsdWVcIiwgb3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICBjaGVja2JveC5maW5kKFwibGFiZWxcIikuYXBwZW5kKG9wdGlvbi50ZXh0KTtcblxuICAgICAgICAgIC8vIHdlJ3ZlIGVuc3VyZWQgdmFsdWVzIGlzIGFuIGFycmF5IHNvIHdlIGNhbiBhbHdheXMgaXRlcmF0ZSBvdmVyIGl0XG4gICAgICAgICAgZWFjaCh2YWx1ZXMsIGZ1bmN0aW9uKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG9wdGlvbi52YWx1ZSkge1xuICAgICAgICAgICAgICBjaGVja2JveC5maW5kKFwiaW5wdXRcIikucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpbnB1dC5hcHBlbmQoY2hlY2tib3gpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gQFRPRE8gcHJvdmlkZSBhbiBhdHRyaWJ1dGVzIG9wdGlvbiBpbnN0ZWFkXG4gICAgLy8gYW5kIHNpbXBseSBtYXAgdGhhdCBhcyBrZXlzOiB2YWxzXG4gICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIpIHtcbiAgICAgIGlucHV0LmF0dHIoXCJwbGFjZWhvbGRlclwiLCBvcHRpb25zLnBsYWNlaG9sZGVyKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wYXR0ZXJuKSB7XG4gICAgICBpbnB1dC5hdHRyKFwicGF0dGVyblwiLCBvcHRpb25zLnBhdHRlcm4pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1heGxlbmd0aCkge1xuICAgICAgaW5wdXQuYXR0cihcIm1heGxlbmd0aFwiLCBvcHRpb25zLm1heGxlbmd0aCk7XG4gICAgfVxuXG4gICAgLy8gbm93IHBsYWNlIGl0IGluIG91ciBmb3JtXG4gICAgZm9ybS5hcHBlbmQoaW5wdXQpO1xuXG4gICAgZm9ybS5vbihcInN1Ym1pdFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyBGaXggZm9yIFNhbW15SlMgKG9yIHNpbWlsYXIgSlMgcm91dGluZyBsaWJyYXJ5KSBoaWphY2tpbmcgdGhlIGZvcm0gcG9zdC5cbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAvLyBAVE9ETyBjYW4gd2UgYWN0dWFsbHkgY2xpY2sgKnRoZSogYnV0dG9uIG9iamVjdCBpbnN0ZWFkP1xuICAgICAgLy8gZS5nLiBidXR0b25zLmNvbmZpcm0uY2xpY2soKSBvciBzaW1pbGFyXG4gICAgICBkaWFsb2cuZmluZChcIi5idG4tcHJpbWFyeVwiKS5jbGljaygpO1xuICAgIH0pO1xuXG4gICAgZGlhbG9nID0gZXhwb3J0cy5kaWFsb2cob3B0aW9ucyk7XG5cbiAgICAvLyBjbGVhciB0aGUgZXhpc3RpbmcgaGFuZGxlciBmb2N1c2luZyB0aGUgc3VibWl0IGJ1dHRvbi4uLlxuICAgIGRpYWxvZy5vZmYoXCJzaG93bi5icy5tb2RhbFwiKTtcblxuICAgIC8vIC4uLmFuZCByZXBsYWNlIGl0IHdpdGggb25lIGZvY3VzaW5nIG91ciBpbnB1dCwgaWYgcG9zc2libGVcbiAgICBkaWFsb2cub24oXCJzaG93bi5icy5tb2RhbFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIG5lZWQgdGhlIGNsb3N1cmUgaGVyZSBzaW5jZSBpbnB1dCBpc24ndFxuICAgICAgLy8gYW4gb2JqZWN0IG90aGVyd2lzZVxuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9KTtcblxuICAgIGlmIChzaG91bGRTaG93ID09PSB0cnVlKSB7XG4gICAgICBkaWFsb2cubW9kYWwoXCJzaG93XCIpO1xuICAgIH1cblxuICAgIHJldHVybiBkaWFsb2c7XG4gIH07XG5cbiAgZXhwb3J0cy5kaWFsb2cgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHNhbml0aXplKG9wdGlvbnMpO1xuXG4gICAgdmFyIGRpYWxvZyA9ICQodGVtcGxhdGVzLmRpYWxvZyk7XG4gICAgdmFyIGlubmVyRGlhbG9nID0gZGlhbG9nLmZpbmQoXCIubW9kYWwtZGlhbG9nXCIpO1xuICAgIHZhciBib2R5ID0gZGlhbG9nLmZpbmQoXCIubW9kYWwtYm9keVwiKTtcbiAgICB2YXIgYnV0dG9ucyA9IG9wdGlvbnMuYnV0dG9ucztcbiAgICB2YXIgYnV0dG9uU3RyID0gXCJcIjtcbiAgICB2YXIgY2FsbGJhY2tzID0ge1xuICAgICAgb25Fc2NhcGU6IG9wdGlvbnMub25Fc2NhcGVcbiAgICB9O1xuXG4gICAgaWYgKCQuZm4ubW9kYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIiQuZm4ubW9kYWwgaXMgbm90IGRlZmluZWQ7IHBsZWFzZSBkb3VibGUgY2hlY2sgeW91IGhhdmUgaW5jbHVkZWQgXCIgK1xuICAgICAgICBcInRoZSBCb290c3RyYXAgSmF2YVNjcmlwdCBsaWJyYXJ5LiBTZWUgaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8gXCIgK1xuICAgICAgICBcImZvciBtb3JlIGRldGFpbHMuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZWFjaChidXR0b25zLCBmdW5jdGlvbihrZXksIGJ1dHRvbikge1xuXG4gICAgICAvLyBAVE9ETyBJIGRvbid0IGxpa2UgdGhpcyBzdHJpbmcgYXBwZW5kaW5nIHRvIGl0c2VsZjsgYml0IGRpcnR5LiBOZWVkcyByZXdvcmtpbmdcbiAgICAgIC8vIGNhbiB3ZSBqdXN0IGJ1aWxkIHVwIGJ1dHRvbiBlbGVtZW50cyBpbnN0ZWFkPyBzbG93ZXIgYnV0IG5lYXRlci4gVGhlbiBidXR0b25cbiAgICAgIC8vIGNhbiBqdXN0IGJlY29tZSBhIHRlbXBsYXRlIHRvb1xuICAgICAgYnV0dG9uU3RyICs9IFwiPGJ1dHRvbiBkYXRhLWJiLWhhbmRsZXI9J1wiICsga2V5ICsgXCInIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBcIiArIGJ1dHRvbi5jbGFzc05hbWUgKyBcIic+XCIgKyBidXR0b24ubGFiZWwgKyBcIjwvYnV0dG9uPlwiO1xuICAgICAgY2FsbGJhY2tzW2tleV0gPSBidXR0b24uY2FsbGJhY2s7XG4gICAgfSk7XG5cbiAgICBib2R5LmZpbmQoXCIuYm9vdGJveC1ib2R5XCIpLmh0bWwob3B0aW9ucy5tZXNzYWdlKTtcblxuICAgIGlmIChvcHRpb25zLmFuaW1hdGUgPT09IHRydWUpIHtcbiAgICAgIGRpYWxvZy5hZGRDbGFzcyhcImZhZGVcIik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuY2xhc3NOYW1lKSB7XG4gICAgICBkaWFsb2cuYWRkQ2xhc3Mob3B0aW9ucy5jbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnNpemUgPT09IFwibGFyZ2VcIikge1xuICAgICAgaW5uZXJEaWFsb2cuYWRkQ2xhc3MoXCJtb2RhbC1sZ1wiKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc2l6ZSA9PT0gXCJzbWFsbFwiKSB7XG4gICAgICBpbm5lckRpYWxvZy5hZGRDbGFzcyhcIm1vZGFsLXNtXCIpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRpdGxlKSB7XG4gICAgICBib2R5LmJlZm9yZSh0ZW1wbGF0ZXMuaGVhZGVyKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jbG9zZUJ1dHRvbikge1xuICAgICAgdmFyIGNsb3NlQnV0dG9uID0gJCh0ZW1wbGF0ZXMuY2xvc2VCdXR0b24pO1xuXG4gICAgICBpZiAob3B0aW9ucy50aXRsZSkge1xuICAgICAgICBkaWFsb2cuZmluZChcIi5tb2RhbC1oZWFkZXJcIikucHJlcGVuZChjbG9zZUJ1dHRvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9zZUJ1dHRvbi5jc3MoXCJtYXJnaW4tdG9wXCIsIFwiLTEwcHhcIikucHJlcGVuZFRvKGJvZHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRpdGxlKSB7XG4gICAgICBkaWFsb2cuZmluZChcIi5tb2RhbC10aXRsZVwiKS5odG1sKG9wdGlvbnMudGl0bGUpO1xuICAgIH1cblxuICAgIGlmIChidXR0b25TdHIubGVuZ3RoKSB7XG4gICAgICBib2R5LmFmdGVyKHRlbXBsYXRlcy5mb290ZXIpO1xuICAgICAgZGlhbG9nLmZpbmQoXCIubW9kYWwtZm9vdGVyXCIpLmh0bWwoYnV0dG9uU3RyKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEJvb3RzdHJhcCBldmVudCBsaXN0ZW5lcnM7IHVzZWQgaGFuZGxlIGV4dHJhXG4gICAgICogc2V0dXAgJiB0ZWFyZG93biByZXF1aXJlZCBhZnRlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIG1vZGFsIGhhcyBwZXJmb3JtZWQgY2VydGFpbiBhY3Rpb25zXG4gICAgICovXG5cbiAgICBkaWFsb2cub24oXCJoaWRkZW4uYnMubW9kYWxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gZW5zdXJlIHdlIGRvbid0IGFjY2lkZW50YWxseSBpbnRlcmNlcHQgaGlkZGVuIGV2ZW50cyB0cmlnZ2VyZWRcbiAgICAgIC8vIGJ5IGNoaWxkcmVuIG9mIHRoZSBjdXJyZW50IGRpYWxvZy4gV2Ugc2hvdWxkbid0IGFueW1vcmUgbm93IEJTXG4gICAgICAvLyBuYW1lc3BhY2VzIGl0cyBldmVudHM7IGJ1dCBzdGlsbCB3b3J0aCBkb2luZ1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzKSB7XG4gICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qXG4gICAgZGlhbG9nLm9uKFwic2hvdy5icy5tb2RhbFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIHNhZGx5IHRoaXMgZG9lc24ndCB3b3JrOyBzaG93IGlzIGNhbGxlZCAqanVzdCogYmVmb3JlXG4gICAgICAvLyB0aGUgYmFja2Ryb3AgaXMgYWRkZWQgc28gd2UnZCBuZWVkIGEgc2V0VGltZW91dCBoYWNrIG9yXG4gICAgICAvLyBvdGhlcndpc2UuLi4gbGVhdmluZyBpbiBhcyB3b3VsZCBiZSBuaWNlXG4gICAgICBpZiAob3B0aW9ucy5iYWNrZHJvcCkge1xuICAgICAgICBkaWFsb2cubmV4dChcIi5tb2RhbC1iYWNrZHJvcFwiKS5hZGRDbGFzcyhcImJvb3Rib3gtYmFja2Ryb3BcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgKi9cblxuICAgIGRpYWxvZy5vbihcInNob3duLmJzLm1vZGFsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgZGlhbG9nLmZpbmQoXCIuYnRuLXByaW1hcnk6Zmlyc3RcIikuZm9jdXMoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEJvb3Rib3ggZXZlbnQgbGlzdGVuZXJzOyBleHBlcmltZW50YWwgYW5kIG1heSBub3QgbGFzdFxuICAgICAqIGp1c3QgYW4gYXR0ZW1wdCB0byBkZWNvdXBsZSBzb21lIGJlaGF2aW91cnMgZnJvbSB0aGVpclxuICAgICAqIHJlc3BlY3RpdmUgdHJpZ2dlcnNcbiAgICAgKi9cblxuICAgIGlmIChvcHRpb25zLmJhY2tkcm9wICE9PSBcInN0YXRpY1wiKSB7XG4gICAgICAvLyBBIGJvb2xlYW4gdHJ1ZS9mYWxzZSBhY2NvcmRpbmcgdG8gdGhlIEJvb3RzdHJhcCBkb2NzXG4gICAgICAvLyBzaG91bGQgc2hvdyBhIGRpYWxvZyB0aGUgdXNlciBjYW4gZGlzbWlzcyBieSBjbGlja2luZyBvblxuICAgICAgLy8gdGhlIGJhY2tncm91bmQuXG4gICAgICAvLyBXZSBhbHdheXMgb25seSBldmVyIHBhc3Mgc3RhdGljL2ZhbHNlIHRvIHRoZSBhY3R1YWxcbiAgICAgIC8vICQubW9kYWwgZnVuY3Rpb24gYmVjYXVzZSB3aXRoIGB0cnVlYCB3ZSBjYW4ndCB0cmFwXG4gICAgICAvLyB0aGlzIGV2ZW50ICh0aGUgLm1vZGFsLWJhY2tkcm9wIHN3YWxsb3dzIGl0KVxuICAgICAgLy8gSG93ZXZlciwgd2Ugc3RpbGwgd2FudCB0byBzb3J0IG9mIHJlc3BlY3QgdHJ1ZVxuICAgICAgLy8gYW5kIGludm9rZSB0aGUgZXNjYXBlIG1lY2hhbmlzbSBpbnN0ZWFkXG4gICAgICBkaWFsb2cub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8gQE5PVEU6IHRoZSB0YXJnZXQgdmFyaWVzIGluID49IDMuMy54IHJlbGVhc2VzIHNpbmNlIHRoZSBtb2RhbCBiYWNrZHJvcFxuICAgICAgICAvLyBtb3ZlZCAqaW5zaWRlKiB0aGUgb3V0ZXIgZGlhbG9nIHJhdGhlciB0aGFuICphbG9uZ3NpZGUqIGl0XG4gICAgICAgIGlmIChkaWFsb2cuY2hpbGRyZW4oXCIubW9kYWwtYmFja2Ryb3BcIikubGVuZ3RoKSB7XG4gICAgICAgICAgZS5jdXJyZW50VGFyZ2V0ID0gZGlhbG9nLmNoaWxkcmVuKFwiLm1vZGFsLWJhY2tkcm9wXCIpLmdldCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlhbG9nLnRyaWdnZXIoXCJlc2NhcGUuY2xvc2UuYmJcIik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkaWFsb2cub24oXCJlc2NhcGUuY2xvc2UuYmJcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGNhbGxiYWNrcy5vbkVzY2FwZSkge1xuICAgICAgICBwcm9jZXNzQ2FsbGJhY2soZSwgZGlhbG9nLCBjYWxsYmFja3Mub25Fc2NhcGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3RhbmRhcmQgalF1ZXJ5IGV2ZW50IGxpc3RlbmVyczsgdXNlZCB0byBoYW5kbGUgdXNlclxuICAgICAqIGludGVyYWN0aW9uIHdpdGggb3VyIGRpYWxvZ1xuICAgICAqL1xuXG4gICAgZGlhbG9nLm9uKFwiY2xpY2tcIiwgXCIubW9kYWwtZm9vdGVyIGJ1dHRvblwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgY2FsbGJhY2tLZXkgPSAkKHRoaXMpLmRhdGEoXCJiYi1oYW5kbGVyXCIpO1xuXG4gICAgICBwcm9jZXNzQ2FsbGJhY2soZSwgZGlhbG9nLCBjYWxsYmFja3NbY2FsbGJhY2tLZXldKTtcbiAgICB9KTtcblxuICAgIGRpYWxvZy5vbihcImNsaWNrXCIsIFwiLmJvb3Rib3gtY2xvc2UtYnV0dG9uXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIG9uRXNjYXBlIG1pZ2h0IGJlIGZhbHN5IGJ1dCB0aGF0J3MgZmluZTsgdGhlIGZhY3QgaXNcbiAgICAgIC8vIGlmIHRoZSB1c2VyIGhhcyBtYW5hZ2VkIHRvIGNsaWNrIHRoZSBjbG9zZSBidXR0b24gd2VcbiAgICAgIC8vIGhhdmUgdG8gY2xvc2UgdGhlIGRpYWxvZywgY2FsbGJhY2sgb3Igbm90XG4gICAgICBwcm9jZXNzQ2FsbGJhY2soZSwgZGlhbG9nLCBjYWxsYmFja3Mub25Fc2NhcGUpO1xuICAgIH0pO1xuXG4gICAgZGlhbG9nLm9uKFwia2V5dXBcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUud2hpY2ggPT09IDI3KSB7XG4gICAgICAgIGRpYWxvZy50cmlnZ2VyKFwiZXNjYXBlLmNsb3NlLmJiXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdGhlIHJlbWFpbmRlciBvZiB0aGlzIG1ldGhvZCBzaW1wbHkgZGVhbHMgd2l0aCBhZGRpbmcgb3VyXG4gICAgLy8gZGlhbG9nZW50IHRvIHRoZSBET00sIGF1Z21lbnRpbmcgaXQgd2l0aCBCb290c3RyYXAncyBtb2RhbFxuICAgIC8vIGZ1bmN0aW9uYWxpdHkgYW5kIHRoZW4gZ2l2aW5nIHRoZSByZXN1bHRpbmcgb2JqZWN0IGJhY2tcbiAgICAvLyB0byBvdXIgY2FsbGVyXG5cbiAgICAkKG9wdGlvbnMuY29udGFpbmVyKS5hcHBlbmQoZGlhbG9nKTtcblxuICAgIGRpYWxvZy5tb2RhbCh7XG4gICAgICBiYWNrZHJvcDogb3B0aW9ucy5iYWNrZHJvcCA/IFwic3RhdGljXCI6IGZhbHNlLFxuICAgICAga2V5Ym9hcmQ6IGZhbHNlLFxuICAgICAgc2hvdzogZmFsc2VcbiAgICB9KTtcblxuICAgIGlmIChvcHRpb25zLnNob3cpIHtcbiAgICAgIGRpYWxvZy5tb2RhbChcInNob3dcIik7XG4gICAgfVxuXG4gICAgLy8gQFRPRE8gc2hvdWxkIHdlIHJldHVybiB0aGUgcmF3IGVsZW1lbnQgaGVyZSBvciBzaG91bGRcbiAgICAvLyB3ZSB3cmFwIGl0IGluIGFuIG9iamVjdCBvbiB3aGljaCB3ZSBjYW4gZXhwb3NlIHNvbWUgbmVhdGVyXG4gICAgLy8gbWV0aG9kcywgZS5nLiB2YXIgZCA9IGJvb3Rib3guYWxlcnQoKTsgZC5oaWRlKCk7IGluc3RlYWRcbiAgICAvLyBvZiBkLm1vZGFsKFwiaGlkZVwiKTtcblxuICAgLypcbiAgICBmdW5jdGlvbiBCQkRpYWxvZyhlbGVtKSB7XG4gICAgICB0aGlzLmVsZW0gPSBlbGVtO1xuICAgIH1cblxuICAgIEJCRGlhbG9nLnByb3RvdHlwZSA9IHtcbiAgICAgIGhpZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtLm1vZGFsKFwiaGlkZVwiKTtcbiAgICAgIH0sXG4gICAgICBzaG93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbS5tb2RhbChcInNob3dcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICAqL1xuXG4gICAgcmV0dXJuIGRpYWxvZztcblxuICB9O1xuXG4gIGV4cG9ydHMuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWVzID0ge307XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgLy8gYWxsb3cgcGFzc2luZyBvZiBzaW5nbGUga2V5L3ZhbHVlLi4uXG4gICAgICB2YWx1ZXNbYXJndW1lbnRzWzBdXSA9IGFyZ3VtZW50c1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLi4uIGFuZCBhcyBhbiBvYmplY3QgdG9vXG4gICAgICB2YWx1ZXMgPSBhcmd1bWVudHNbMF07XG4gICAgfVxuXG4gICAgJC5leHRlbmQoZGVmYXVsdHMsIHZhbHVlcyk7XG4gIH07XG5cbiAgZXhwb3J0cy5oaWRlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgJChcIi5ib290Ym94XCIpLm1vZGFsKFwiaGlkZVwiKTtcblxuICAgIHJldHVybiBleHBvcnRzO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIHN0YW5kYXJkIGxvY2FsZXMuIFBsZWFzZSBhZGQgbW9yZSBhY2NvcmRpbmcgdG8gSVNPIDYzOS0xIHN0YW5kYXJkLiBNdWx0aXBsZSBsYW5ndWFnZSB2YXJpYW50cyBhcmVcbiAgICogdW5saWtlbHkgdG8gYmUgcmVxdWlyZWQuIElmIHRoaXMgZ2V0cyB0b28gbGFyZ2UgaXQgY2FuIGJlIHNwbGl0IG91dCBpbnRvIHNlcGFyYXRlIEpTIGZpbGVzLlxuICAgKi9cbiAgdmFyIGxvY2FsZXMgPSB7XG4gICAgYmdfQkcgOiB7XG4gICAgICBPSyAgICAgIDogXCLQntC6XCIsXG4gICAgICBDQU5DRUwgIDogXCLQntGC0LrQsNC3XCIsXG4gICAgICBDT05GSVJNIDogXCLQn9C+0YLQstGK0YDQttC00LDQstCw0LxcIlxuICAgIH0sXG4gICAgYnIgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwiQ2FuY2VsYXJcIixcbiAgICAgIENPTkZJUk0gOiBcIlNpbVwiXG4gICAgfSxcbiAgICBjcyA6IHtcbiAgICAgIE9LICAgICAgOiBcIk9LXCIsXG4gICAgICBDQU5DRUwgIDogXCJacnXFoWl0XCIsXG4gICAgICBDT05GSVJNIDogXCJQb3R2cmRpdFwiXG4gICAgfSxcbiAgICBkYSA6IHtcbiAgICAgIE9LICAgICAgOiBcIk9LXCIsXG4gICAgICBDQU5DRUwgIDogXCJBbm51bGxlclwiLFxuICAgICAgQ09ORklSTSA6IFwiQWNjZXB0ZXJcIlxuICAgIH0sXG4gICAgZGUgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwiQWJicmVjaGVuXCIsXG4gICAgICBDT05GSVJNIDogXCJBa3plcHRpZXJlblwiXG4gICAgfSxcbiAgICBlbCA6IHtcbiAgICAgIE9LICAgICAgOiBcIs6Vzr3PhM6szr7Otc65XCIsXG4gICAgICBDQU5DRUwgIDogXCLOkc66z43Pgc+Jz4POt1wiLFxuICAgICAgQ09ORklSTSA6IFwizpXPgM65zrLOtc6yzrHOr8+Jz4POt1wiXG4gICAgfSxcbiAgICBlbiA6IHtcbiAgICAgIE9LICAgICAgOiBcIk9LXCIsXG4gICAgICBDQU5DRUwgIDogXCJDYW5jZWxcIixcbiAgICAgIENPTkZJUk0gOiBcIk9LXCJcbiAgICB9LFxuICAgIGVzIDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIkNhbmNlbGFyXCIsXG4gICAgICBDT05GSVJNIDogXCJBY2VwdGFyXCJcbiAgICB9LFxuICAgIGV0IDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIkthdGtlc3RhXCIsXG4gICAgICBDT05GSVJNIDogXCJPS1wiXG4gICAgfSxcbiAgICBmYSA6IHtcbiAgICAgIE9LICAgICAgOiBcItmC2KjZiNmEXCIsXG4gICAgICBDQU5DRUwgIDogXCLZhNi62YhcIixcbiAgICAgIENPTkZJUk0gOiBcItiq2KfbjNuM2K9cIlxuICAgIH0sXG4gICAgZmkgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwiUGVydXV0YVwiLFxuICAgICAgQ09ORklSTSA6IFwiT0tcIlxuICAgIH0sXG4gICAgZnIgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwiQW5udWxlclwiLFxuICAgICAgQ09ORklSTSA6IFwiRCdhY2NvcmRcIlxuICAgIH0sXG4gICAgaGUgOiB7XG4gICAgICBPSyAgICAgIDogXCLXkNeZ16nXldeoXCIsXG4gICAgICBDQU5DRUwgIDogXCLXkdeZ15jXldecXCIsXG4gICAgICBDT05GSVJNIDogXCLXkNeZ16nXldeoXCJcbiAgICB9LFxuICAgIGh1IDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIk3DqWdzZW1cIixcbiAgICAgIENPTkZJUk0gOiBcIk1lZ2VyxZFzw610XCJcbiAgICB9LFxuICAgIGhyIDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIk9kdXN0YW5pXCIsXG4gICAgICBDT05GSVJNIDogXCJQb3R2cmRpXCJcbiAgICB9LFxuICAgIGlkIDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIkJhdGFsXCIsXG4gICAgICBDT05GSVJNIDogXCJPS1wiXG4gICAgfSxcbiAgICBpdCA6IHtcbiAgICAgIE9LICAgICAgOiBcIk9LXCIsXG4gICAgICBDQU5DRUwgIDogXCJBbm51bGxhXCIsXG4gICAgICBDT05GSVJNIDogXCJDb25mZXJtYVwiXG4gICAgfSxcbiAgICBqYSA6IHtcbiAgICAgIE9LICAgICAgOiBcIk9LXCIsXG4gICAgICBDQU5DRUwgIDogXCLjgq3jg6Pjg7Pjgrvjg6tcIixcbiAgICAgIENPTkZJUk0gOiBcIueiuuiqjVwiXG4gICAgfSxcbiAgICBsdCA6IHtcbiAgICAgIE9LICAgICAgOiBcIkdlcmFpXCIsXG4gICAgICBDQU5DRUwgIDogXCJBdMWhYXVrdGlcIixcbiAgICAgIENPTkZJUk0gOiBcIlBhdHZpcnRpbnRpXCJcbiAgICB9LFxuICAgIGx2IDoge1xuICAgICAgT0sgICAgICA6IFwiTGFiaVwiLFxuICAgICAgQ0FOQ0VMICA6IFwiQXRjZWx0XCIsXG4gICAgICBDT05GSVJNIDogXCJBcHN0aXByaW7EgXRcIlxuICAgIH0sXG4gICAgbmwgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwiQW5udWxlcmVuXCIsXG4gICAgICBDT05GSVJNIDogXCJBY2NlcHRlcmVuXCJcbiAgICB9LFxuICAgIG5vIDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIkF2YnJ5dFwiLFxuICAgICAgQ09ORklSTSA6IFwiT0tcIlxuICAgIH0sXG4gICAgcGwgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwiQW51bHVqXCIsXG4gICAgICBDT05GSVJNIDogXCJQb3R3aWVyZMW6XCJcbiAgICB9LFxuICAgIHB0IDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIkNhbmNlbGFyXCIsXG4gICAgICBDT05GSVJNIDogXCJDb25maXJtYXJcIlxuICAgIH0sXG4gICAgcnUgOiB7XG4gICAgICBPSyAgICAgIDogXCJPS1wiLFxuICAgICAgQ0FOQ0VMICA6IFwi0J7RgtC80LXQvdCwXCIsXG4gICAgICBDT05GSVJNIDogXCLQn9GA0LjQvNC10L3QuNGC0YxcIlxuICAgIH0sXG4gICAgc3EgOiB7XG4gICAgICBPSyA6IFwiT0tcIixcbiAgICAgIENBTkNFTCA6IFwiQW51bG9cIixcbiAgICAgIENPTkZJUk0gOiBcIlByYW5vXCJcbiAgICB9LFxuICAgIHN2IDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIkF2YnJ5dFwiLFxuICAgICAgQ09ORklSTSA6IFwiT0tcIlxuICAgIH0sXG4gICAgdGggOiB7XG4gICAgICBPSyAgICAgIDogXCLguJXguIHguKXguIdcIixcbiAgICAgIENBTkNFTCAgOiBcIuC4ouC4geC5gOC4peC4tOC4gVwiLFxuICAgICAgQ09ORklSTSA6IFwi4Lii4Li34LiZ4Lii4Lix4LiZXCJcbiAgICB9LFxuICAgIHRyIDoge1xuICAgICAgT0sgICAgICA6IFwiVGFtYW1cIixcbiAgICAgIENBTkNFTCAgOiBcIsSwcHRhbFwiLFxuICAgICAgQ09ORklSTSA6IFwiT25heWxhXCJcbiAgICB9LFxuICAgIHpoX0NOIDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIuWPlua2iFwiLFxuICAgICAgQ09ORklSTSA6IFwi56Gu6K6kXCJcbiAgICB9LFxuICAgIHpoX1RXIDoge1xuICAgICAgT0sgICAgICA6IFwiT0tcIixcbiAgICAgIENBTkNFTCAgOiBcIuWPlua2iFwiLFxuICAgICAgQ09ORklSTSA6IFwi56K66KqNXCJcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5hZGRMb2NhbGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZXMpIHtcbiAgICAkLmVhY2goW1wiT0tcIiwgXCJDQU5DRUxcIiwgXCJDT05GSVJNXCJdLCBmdW5jdGlvbihfLCB2KSB7XG4gICAgICBpZiAoIXZhbHVlc1t2XSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugc3VwcGx5IGEgdHJhbnNsYXRpb24gZm9yICdcIiArIHYgKyBcIidcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsb2NhbGVzW25hbWVdID0ge1xuICAgICAgT0s6IHZhbHVlcy5PSyxcbiAgICAgIENBTkNFTDogdmFsdWVzLkNBTkNFTCxcbiAgICAgIENPTkZJUk06IHZhbHVlcy5DT05GSVJNXG4gICAgfTtcblxuICAgIHJldHVybiBleHBvcnRzO1xuICB9O1xuXG4gIGV4cG9ydHMucmVtb3ZlTG9jYWxlID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSBsb2NhbGVzW25hbWVdO1xuXG4gICAgcmV0dXJuIGV4cG9ydHM7XG4gIH07XG5cbiAgZXhwb3J0cy5zZXRMb2NhbGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGV4cG9ydHMuc2V0RGVmYXVsdHMoXCJsb2NhbGVcIiwgbmFtZSk7XG4gIH07XG5cbiAgZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oXyQpIHtcbiAgICByZXR1cm4gaW5pdChfJCB8fCAkKTtcbiAgfTtcblxuICByZXR1cm4gZXhwb3J0cztcbn0pKTtcbiIsInZhciBjdXIgPSB7XG4gICAgX2NzcmY6IGZhbHNlLFxuICAgIGZvcmdvdExvZ2luOiBmYWxzZSxcbiAgICBmb3Jnb3RIYXNoOiBmYWxzZSxcbiAgICBmb3Jnb3RGb3JtU2VuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjdXIuX2NzcmYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcIl9jc3JmXCIpWzBdLnZhbHVlO1xuICAgICAgICB2YXIgbG9naW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3RvcmVmb3JtLXBob25lXCIpLnZhbHVlO1xuICAgICAgICB2YXIgcmVjYXB0Y2hhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0b3JlZm9ybS1yZWNhcHRjaGFcIikudmFsdWU7XG4gICAgICAgIHZhbGlkYXRlUGhvbmUobG9naW4sIHJlY2FwdGNoYSwgY3VyLl9jc3JmKTtcbiAgICB9LFxuICAgIHNlbmRDb2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3RvcmVmb3JtLWNvZGVcIikudmFsdWU7XG4gICAgICAgIHZhbGlkYXRlS2V5KGN1ci5mb3Jnb3RMb2dpbiwga2V5LCBjdXIuX2NzcmYpO1xuICAgIH0sXG4gICAgbmV3UGFzc1NlbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3RvcmUtZm9ybVwiKTtcbiAgICAgICAgdmFyIHBhc3NXcmFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXNzLXdyYXBcIik7XG4gICAgICAgIGlmIChwYXNzV3JhcC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiLmhhcy1lcnJvclwiKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdmFyIHBhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3NcIikudmFsdWU7XG4gICAgICAgICAgICB2YXIgcmVwYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXBhc3NcIikudmFsdWU7XG4gICAgICAgICAgICB2YXIgYm9keSA9IFwiX2NzcmY9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoY3VyLl9jc3JmKVxuICAgICAgICAgICAgICAgICsgXCImbG9naW49XCIgKyBlbmNvZGVVUklDb21wb25lbnQoY3VyLmZvcmdvdExvZ2luKVxuICAgICAgICAgICAgICAgICsgXCImcGFzc3dvcmQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocGFzcylcbiAgICAgICAgICAgICAgICArIFwiJnJlcGFzc3dvcmQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocmVwYXNzKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcInJlc2V0LXBhc3N3b3JkXCI7XG4gICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlLm1lc3NhZ2UsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcImxvZ2luXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2UubWVzc2FnZTtcbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZShlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNlbmRSZXF1ZXN0KGJvZHksIHVybCwgc3VjY2VzcywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gdmFsaWRhdGVQaG9uZShsb2dpbiwgY2FwdGNoYSwgX2NzcmYpIHtcbiAgICB2YXIgYm9keSA9IFwiX2NzcmY9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoX2NzcmYpXG4gICAgICAgICsgXCImcmVjYXB0Y2hhPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlY2FwdGNoYSlcbiAgICAgICAgKyBcIiZsb2dpbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChsb2dpbik7XG4gICAgdmFyIG1ldGhvZCA9IFwiUE9TVFwiO1xuICAgIHZhciB1cmwgPSBcInZhbGlkYXRlLXBob25lXCI7XG4gICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2VUZXh0KSB7XG4gICAgICAgIGN1ci5mb3Jnb3RMb2dpbiA9IGxvZ2luO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBob25lLXdyYXBcIikuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJrZXktd3JhcFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tcmVzdG9yZVwiKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3VyLnNlbmRDb2RlKCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm1lc3NhZ2U7XG4gICAgICAgIHNob3dNZXNzYWdlKGVycm9yTWVzc2FnZSk7XG4gICAgfTtcbiAgICBzZW5kUmVxdWVzdChib2R5LCB1cmwsIHN1Y2Nlc3MsIGVycm9yKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVLZXkobG9naW4sIGtleSwgX2NzcmYpIHtcbiAgICB2YXIgYm9keSA9IFwiX2NzcmY9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoX2NzcmYpXG4gICAgICAgICsgXCIma2V5PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGtleSlcbiAgICAgICAgKyBcIiZsb2dpbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChsb2dpbik7XG4gICAgdmFyIG1ldGhvZCA9IFwiUE9TVFwiO1xuICAgIHZhciB1cmwgPSBcInZhbGlkYXRlLWtleVwiO1xuICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlVGV4dCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImtleS13cmFwXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXNzLXdyYXBcIikuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLXJlc3RvcmVcIikub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGN1ci5uZXdQYXNzU2VuZCgpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5tZXNzYWdlO1xuICAgICAgICBzaG93TWVzc2FnZShlcnJvck1lc3NhZ2UpO1xuICAgIH07XG4gICAgc2VuZFJlcXVlc3QoYm9keSwgdXJsLCBzdWNjZXNzLCBlcnJvcik7XG59XG5cbmZ1bmN0aW9uIHNlbmRSZXF1ZXN0KGJvZHksIHVybCwgc3VjY2VzcywgZXJyb3IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIG1ldGhvZCA9IFwiUE9TVFwiO1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDQgJiYgdGhpcy5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICBzdWNjZXNzKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnN0YXR1cyA9PSA0MDApIHtcbiAgICAgICAgICAgIGVycm9yKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKVxuICAgICAgICB9XG4gICAgfTtcbiAgICB4aHIuc2VuZChib2R5KTtcbn1cblxuZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICBib290Ym94LmFsZXJ0KG1lc3NhZ2UsIGNhbGxiYWNrKTtcbn1cbiJdfQ==
